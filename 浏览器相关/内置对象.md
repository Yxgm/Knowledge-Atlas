



### 常见浏览器 JS 对象常见 API 及用法

https://segmentfault.com/a/1190000014212576

#### 什么是浏览器对象模型

BOM ：Browser Object Model（浏览器对象模型）,浏览器模型提供了独立于内容的、可以与浏览器窗口进行滑动的对象结构，就是浏览器提供的 API
其主要对象有：

1. window 对象——BOM 的核心，是 js 访问浏览器的接口，也是 ES 规定的 Global 对象
2. location 对象：提供当前窗口中的加载的文档有关的信息和一些导航功能。既是 window 对象属性，也是 document 的对象属性
3. navigation 对象：获取浏览器的系统信息
4. screen 对象：用来表示浏览器窗口外部的显示器的信息等
5. history 对象：保存用户上网的历史信息

#### Window 对象

windows 对象是整个浏览器对象模型的核心，其扮演着既是接口又是全局对象的角色

open() 打开一个新的页面
onerror() 前端监听，监控全局是否报错， addEventListener（“error”）

- setTimeout()

> 问：使用一个 setTimeout 实现一个轮训，或者使用 setTimeout 实现 setInterval

```js
const mySetTimeOut = (fn, time) => {
  setTimeout(Interval, time);
  function Interval() {
    fn();
    setTimeout(Interval, time);
  }
  //当结果返回了，我们应该停止计时轮训
};
function bar() {
  console.log("bar");
}
mySetTimeOut(bar, 1000);
```

- setInterval 函数，无论上次的结果是什么，他都会去执行，在业务中，我们拿到了 result，就应不不在去 setInterval 了

- 窗口位置

screenLeft
screenTop
screenX
screenY
moveBy(x,y)
moveTo(x,y)

- 窗口大小

innerWidth
innerHeight，移动端是 document.body.clientWidth

outerWidth
outerHeight

resizeTo(width, height)
resizeBy(width, height)

- 定时器

setTimeout
setInterval

#### Location 对象

提供当前窗口中的加载的文档有关的信息和一些导航功能。既是 window 对象属性，也是 document 的对象属性

<img src="../assets/location对象.png" style="width:300px"/>



>  history路由的底层原理：通过pushState，改变url路径，在window上添加事件监听，通过判断location.pathname的值，来判断显示哪个页面。在页面回退的时候，并不会正常的跳转，所以说我们还需要监听“popstate”事件，添加urlChange事件

```js
//在路由跳转的ui上绑定事件
el.addEventlistener('click',()=>{
	e.preventDefault();
  history.pushState({},"","/about")
  ......
  urlChange()
})
之后在添加判断loaction.pathname函数urlChange
```



> hash路由原理：通过监听浏览器的hashchange事件，再通过loaction.hash,判断显示哪个页面。
>
> ```js
> window.addEventListener("hashchange",()=>{
> 	switch(location.hash){
>     case "#/home":
>       //......break;
>     case "#/about":
>       ........
>   }
> })
> ```
>
> 

详细前端路由请鉴 ../补充的重点知识

#### Navigation 对象

navigation 接口表示用户代理的状态和标识，允许脚本查询它和注册自己进行一些活动

isOnline:判断是否断网

#### History 对象

history 对象保存着用户上网的历史记录，从窗口被打开的那一刻算起，history 对象是用窗口的浏览历史用文档和文档状态列表的形式表示。

go()
back()
forword()
length
pushState和onPopState