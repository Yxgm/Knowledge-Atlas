微前端的优点:微前端的优点包括独立开发、独立部署。对于大型的单页应用， 采用微前端架构方式可无限扩展，其复杂度不会很明显的增长。此外，微前端不限技 术栈，借助隔离机制保证技术栈的隔离性。第四点，可快速整合业务，如 toB 的产品 需要符合客户的定制化需求，每个客户的业务场景都互不相同，此时需要产品具备更 灵活的特点符合客户的业务定制需求。最后，微前端可以多人协作。

微前端的缺点:当然，微前端的缺点也很明显。首先，微前端会导致体验折损， 微前端每一步都是异步加载，中间会出现不流畅的问题。此外，当一个单体应用被拆 成若干个，其维护成本也相应增加，如如何管理多个版本，如何复用公共组件等，导 致管理版本变得复杂，依赖关系也极其复杂。还有，如果应用拆分的粒度过小，对于 工程师的开发体验也会不太友好，如果工程师负责的需求跨多个业务域，此时他 / 她 需要与多个团队合作，沟通成本大大增加。

<a href="https://juejin.cn/post/6981374562877308936#heading-2">Js沙箱</a>

## 1. 严格沙箱

在加载子应用时，添加`strictStyleIsolation: true`属性，实现形式为将整个子应用放到`Shadow DOM`内进行嵌入，完全隔离了主子应用

缺点：

子应用的弹窗、抽屉、popover因找不到主应用的body会丢失，或跑到整个屏幕外（具体原因作者并未详细研究）

主应用不方便去修改子应用的样式

## 2. 实验性沙箱

在加载子应用时，添加`experimentalStyleIsolation: true`属性，实现形式类似于vue中style标签中的scoped属性，qiankun会自动为子应用所有的样式增加后缀标签，如：`div[data-qiankun-microName]`

缺点：

- 子应用的弹窗、抽屉、popover因插入到了主应用的body，所以导致样式丢失或应用了主应用了样式

# 最终解决方案

说了这么多qiankun自带的css沙箱隔离，但都有各自的缺点，并且对于系统的实现上，影响范围还比较严重，代码的修改范围也比较大。作者的项目中，主子应用都是vue项目，并且都用了element家的样式且都各自魔改过，遂果断不开启css沙箱，给各自的项目class全局加上一个各自的命名空间，可以自己的项目名，比如：`myVue body`、`myVue el-form-info__label`、`myVue customClass`等。

